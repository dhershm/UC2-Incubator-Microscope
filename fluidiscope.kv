#:kivy 1.10
#:import SlideTransition kivy.uix.screenmanager.SlideTransition

# predefine color_sets
#:set btn_color_disabled [0.1, 0.1, 0.1, 1.0]

# CUSTOM LABEL
#<FluidLabel@Label>
    
# Custom SLIDER
# Solution froM: https://stackoverflow.com/questions/28302476/how-to-customize-a-slider-in-kivy

<FluidSlide1@Slider>:
    Label:
        pos: (root.value_pos[0] - sp(16), root.center_y - sp(40)) if root.orientation == 'horizontal' else (root.center_x - sp(27), root.value_pos[1] - sp(16))
        size_hint: None, None
        size: sp(32), sp(32)
        text: str(int(root.value)) + "m"
<FluidSlide2@Slider>:
    Label:
        pos: (root.value_pos[0] - sp(16), root.center_y - sp(40)) if root.orientation == 'horizontal' else (root.center_x - sp(27), root.value_pos[1] - sp(16))
        size_hint: None, None
        size: sp(32), sp(32)
        text: str(int(root.value)) + "h"

<FluidSlide3@Slider>:
    Label:
        pos: (root.value_pos[0] - sp(16), root.center_y - sp(40)) if root.orientation == 'horizontal' else (root.center_x - sp(27), root.value_pos[1] - sp(16))
        size_hint: None, None
        size: sp(32), sp(32)
        text: str(int(root.value/255*100)) + "%"

# CUSTOM POPUP
<fluidPopup@Popup>:
    size_hint: (0.8,0.8)
    name: "popup_name_last_im"
    id: popup_last_im
    title: ''
    auto_dismiss: False
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.8
            Image:
                id: popup_last_im_image
        BoxLayout:
            size_hint_y: 0.2
            padding: [10,5,10,5]
            FluidButton:
                id: btn_popup_dismiss
                text: 'Close'
                on_press: root.popup_dismiss(self)

#CUSTOM BUTTON
<FluidButton@Button>:
    background_normal: ''
    background_color: [0.5, 0.5, 0.5, 1.0]
    background_disabled_normal: self.background_normal
    fl_active: False
    fl_value: [0,0,0]

<FluidButtonMenu@FluidButton>:
    background_color: [0.2, 0.2, 0.2, 1.0]

# CUSTOM WIDGETS
<FluidLineVert@Widget>:
    size_hint_x: 0.01
    canvas.before:
        Color:
            rgba: 0.5,0.5,1,1
        Rectangle:
            pos: self.pos
            size: self.size

<FluidLineVert2@Widget>:
    size_hint_x: 0.01
    canvas.before:
        Color:
            rgba: 0.5,0.7,1,0.5
        Rectangle:
            pos: self.pos
            size: self.size

<FluidLineHor@Widget>:
    size_hint_y: 0.005
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size

# add value to identify active object easily
<FluidToggleGroup@GridLayout>:
    bwidth: 2
    current_active: 2
    bcolor: 0,0,0,1
    canvas.before:
        Color:
            rgba: self.bcolor
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<FluidLabel@Label>:
    color: 1, 1, 1, 1
    bgcolor: 0,0,0,1
    canvas.before:
        Color:
            rgba: self.bgcolor
        Rectangle:
            pos: self.pos
            size: self.size

<FluidiCheckBox@CheckBox>:
    #color: 0, 0, 0, 1
    #size_hint: 0.15, 1


<FluidiCheckLabel@ButtonBehavior+Label>:
    text_size: self.size
    valign: 'center'
    #font_size: '13sp'
    #color: 0, 0, 0, 1

<FluidiLabelCheckBox@BoxLayout>:
    text: ''
    group: ''
    FluidiCheckLabel:
        on_press: fluidi_checkbox_btn._do_press()
        text: root.text

    FluidiCheckBox:
        id: fluidi_checkbox_btn
        group: root.group 

<FluidiBox@BoxLayout>:
    border_width: 1
    border_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: self.border_color
        Line:
            width: 1 #self.border_width
            rectangle: self.x, self.y, self.width, self.height 
# CUSTOM SCREENS
#<FluidPopupCopy@Popup>:
#    popup_list_view: popup_list_view
#    popup_choose_file_list_view: popup_choose_file_list_view
#    ListView:
#        id: popup_list_view
#        adapter:
#            lisa.ListAdapter(data=root.get_win_drives(), selection_mode='single', allow_empty_selection=False, cls=lv.ListItemButton)
#    FileChooserListView:
#        id: popup_choose_file_list_view



<Fluidiscope>:
    name: 'MainApp'
    orientation: 'horizontal'

    # ATTRIBUTES
    #drives_list: scr_copy_1_drives_list
    #file_chooser: scr_copy_1_filechooser

    # General Colors etc
    canvas.before:
        Color:
            rgba: 0.0,0.0,0.0,1
        Rectangle:
            pos: self.pos
            size: self.size

    # LEFT SIDE
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: 0.6
        BoxLayout:
            size_hint_y: 0.1
            padding: [20,10,20,10]
            spacing: 2
            FluidButton:
                size_hint_x: 0.9
                id: btn_preview
                text: "Show Preview"
                on_press: root.btn_function_preview(self)
                fl_active: False 
            FluidButton:
                size_hint_x: 0.1
                id: btn_preview_big
                text: "big"
                on_press: root.btn_function_preview(self)
                fl_active: False
        Widget:
            size_hint_y: 0.5
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1
        #BoxLayout:
        #    size_hint_y: 0.05
        #    padding: [30,10,30,10]
        #    orientation: "horizontal"
        #    FluidLabel:
        #        size_hint_x: 0.25
        #        text: "Temp:"
        #        color: 1, 1, 1, 1
        #    FluidLabel:
        #        id: lbl_temperature
        #        size_hint_x: 0.25
        #        text: ""
        #    FluidLabel:
        #        size_hint_x: 0.25
        #        text: "Hum:"
        #        color: 1, 1, 1, 1
            FluidLabel:
                id: lbl_Info
                text: ""
                # on_press: root.btn_function_update_temphum('btn_hum_kv')
        #Widget:
        #    size_hint_y: 0.01
        BoxLayout:
            size_hint_y: 0.1
            padding: [0,2,0,2]
            orientation: 'horizontal'
            BoxLayout:
                size_hint_x: 0.6
                orientation: 'vertical'
                padding: (2,0,2,0)
                GridLayout:
                    size_hint_y: 0.8
                    cols: 3
                    row: 1
                    spacing: 2
                    #Autofocus part
                    FluidButton:
                        id: btn_autofocus
                        text: "AF off"
                        on_press: root.btn_function_autofocus(self)
                    FluidButton:
                        id: btn_autofocus_now
                        text: "AF now"
                        on_press: root.btn_function_autofocus(self)
                    FluidButton:
                        id: btn_autofocus_opt
                        text: "AF opt"
                        on_press: root.scr_switch(self)
                BoxLayout:
                    size_hint_y: 0.2
                    ProgressBar:
                        id: pb_autofocus
                        max: 100
                        value: 0
            BoxLayout:
                size_hint_x: 0.01
                FluidLineVert:
                    #test
            BoxLayout:
                size_hint_x: 0.39
                padding: (2,0,2,0)
                canvas.before:
                    Color:
                        rgba: 0.0,0.2,0.2,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                GridLayout:
                    cols: 2
                    row: 1
                    spacing: 2
                    #Autofocus part
                    FluidButton:
                        id: btn_camera_live_settings
                        text: "camSET"
                        on_press: root.btn_camera_live_settings(self)
                    FluidButton:
                        id: btn_tomography_settings
                        text: "tomoSET"
                        fl_active: False
                        on_press: root.scr_switch(self)                
        Widget:
            size_hint_y: 0.001
        BoxLayout:
            size_hint_y: 0.1
            canvas.before:
                Color:
                    rgba: 0.0,0.2,0.2,1
                Rectangle:
                    pos: self.pos
                    size: self.size
            padding: [0,2,0,2]
            orientation: "horizontal"
            GridLayout:
                size_hint_x: 0.3
                padding: [2,0,2,0]
                spacing: 2
                rows: 1
                cols: 3
                FluidButton:
                    id: btn_light_full
                    text: "FULL"
                    on_press: root.buttons_light(self)
                FluidButton:
                    id: btn_light_preset_pattern
                    text: "PRE"
                    on_press: root.buttons_light(self)
                FluidButton:
                    id: btn_light_custom_pattern
                    text: "CUS"
                    on_press: root.buttons_light(self)
            BoxLayout:
                padding: (0,0,2,0)
                size_hint_x: 0.01
                FluidLineVert:
                # inserts a pre-defined line
            FluidButton:
                size_hint_x: 0.1
                #padding: [5,0,5,0]
                #spacing: [2,0]
                id: btn_light_fluo
                text: "FLUO"
                on_press: root.buttons_light(self)
            FluidSlide3:
                id: slider_light_intensity
                name: "slider_light_intensity_name"
                size_hint_x: 0.38
                min: 0
                max: 100
                value: root.init_var[0]
                step: 1
                on_value: root.slider_change(self)
        BoxLayout:
            size_hint_y: 0.1
            orientation: "horizontal"
            padding: [0,2,0,2]
            canvas.before:
                Color:
                    rgba: 0.0,0.2,0.2,1
                Rectangle:
                    pos: self.pos
                    size: self.size
            GridLayout:
                size_hint_x: 0.24
                padding: [2,0,2,0]
                spacing: 2
                cols: 3
                rows: 1
                FluidButton:
                    id: btn_motor_dir_x
                    text: "x"
                    disabled: False
                    on_press: root.btn_motor_movement_direction(self)
                FluidButton:
                    id: btn_motor_dir_y
                    text: "y"
                    disabled: False
                    on_press: root.btn_motor_movement_direction(self)
                FluidButton:
                    id: btn_motor_dir_z
                    text: "z"
                    disabled: False
                    on_press: root.btn_motor_movement_direction(self)
            FluidLineVert:
                size_hint_x: 0.01
                # inserts a pre-defined line
            GridLayout:
                size_hint_x: 0.24
                cols: 3
                rows: 1
                padding: [5,0,5,0]
                spacing: 2
                FluidButton:
                    id: btn_motor_down
                    text: "<<"
                    disabled: True
                    on_press: root.btn_function_move_motor(self)
                FluidButton:
                    id: btn_motor_stepsize_mminus
                    text: "--"
                    disabled: True
                    on_press: root.motor_stepsize(self)
                FluidButton:
                    id: btn_motor_stepsize_minus
                    text: "-"
                    disabled: True
                    on_press: root.motor_stepsize(self)
            FluidLineVert2:
                size_hint_x: 0.01
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.24
                BoxLayout:
                    size_hint_y: 0.8
                    padding: [5,0,5,0]
                    FluidLabel:
                        size_hint_x: 0.5
                        id: lbl_motor_stepsize
                        text: root.init_var[1]
                        halign: "right"
                        valign: "middle"
                        disabled: True
                    FluidLabel:
                        size_hint_x: 0.3
                        id: lbl_motor_stepsize_unit
                        text: "um"
                        halign: "left"
                        valign: "middle"
                        disabled: True
                BoxLayout:
                    padding: [5,0,5,0]
                    size_hint_y: 0.2
                    ProgressBar:
                        id: pb_motor_step
                        max: 100
                        value: 0
            FluidLineVert2:
                size_hint_x: 0.01
            GridLayout:
                size_hint_x: 0.24
                cols: 3
                rows: 1
                padding: [5,0,5,0]
                spacing: 2
                FluidButton:
                    id: btn_motor_stepsize_plus
                    text: "+"
                    disabled: True
                    on_press: root.motor_stepsize(self)
                FluidButton:
                    id: btn_motor_stepsize_pplus
                    text: "++"
                    disabled: True
                    on_press: root.motor_stepsize(self)
                FluidButton:
                    id: btn_motor_up
                    text: ">>"
                    disabled: True
                    on_press: root.btn_function_move_motor(self)
    BoxLayout:
        size_hint_x: 0.005
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                pos: self.pos
                size: self.size

    # RIGHT SIDE
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: 0.45
        border: 2,
        ScreenManager:
            id: sm
            size_hint_y: 0.8
            transition: SlideTransition(direction='down')

            # scr_start
            Screen:
                name: "scr_start"
                BoxLayout:
                    orientation: 'vertical'
                    Widget:
                        size_hint_y: 0.25
                    BoxLayout:
                        size_hint_y: 0.5
                        padding: [10,10,10,10]
                        Button:
                            id: btn_start_expt
                            text: "Start Experiment"
                            on_release: root.start_experiment(self)
                    Label:
                        size_hint_y: 0.25
                        id: lbl_warning
                        text: ''
                        font_size: '18sp'

            # scr_imaging
            Screen:
                name: "scr_imaging"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.15
                        canvas.before:
                            Color:
                                rgba: 0.0,0.2,0.2,1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        padding: (5,5,5,5)
                        GridLayout:
                            size_hint_x: 0.8
                            cols: 6
                            row: 1
                            spacing: 2
                            FluidButton:
                                id: btn_imaging_technique_1
                                text: "Bright"
                                on_press: root.select_imaging_method(self)
                            FluidButton:
                                id: btn_imaging_technique_2
                                text: "qDPC"
                                on_press: root.select_imaging_method(self)
                            FluidButton:
                                id: btn_imaging_technique_3
                                text: "Custom"
                                on_press: root.select_imaging_method(self)
                            FluidButton:
                                id: btn_imaging_technique_4
                                text: "FPM"
                                on_press: root.select_imaging_method(self)                            
                            FluidButton:
                                id: btn_imaging_technique_5
                                text: "Fluor"
                                on_press: root.select_imaging_method(self)
                            FluidButton:
                                id: btn_imaging_technique_6
                                text: "Ext"
                                on_press: root.select_imaging_method(self)
                        BoxLayout:
                            padding: (2,0,2,0)
                            size_hint_x: 0.05
                            FluidLineVert:                   
                            # inserts a pre-defined line
                        BoxLayout:
                            size_hint_x: 0.15
                            #padding: (5,0,0,0)
                            FluidButton:
                                id: btn_imaging_technique_tomography
                                fl_active: False
                                text: "Tomo"
                                on_press: root.tomography_btn_logic(self) 
                    BoxLayout:
                        size_hint_y: 0.2
                        orientation: 'vertical'
                        padding: (0,1,0,1)
                        BoxLayout:
                            size_hint_y: 0.5
                            padding: (5,5,5,5)
                            FluidButton:
                                size_hint_x: 0.15
                                id: btn_imaging_measiter
                                text: 'MEAS\nITER'
                                on_press: root.select_imaging_time_entry(self)
                            Label:
                                id: lbl_imaging_measiter
                                size_hint_x: 0.3
                                text: root.meas_var[0]
                            FluidButton:
                                size_hint_x: 0.15
                                text: 'TOTAL\nDURAT'
                                id: btn_imaging_totaldurat
                                on_press: root.select_imaging_time_entry(self)
                            Label:
                                id: lbl_imaging_totaldurat
                                size_hint_x: 0.3
                                text: root.meas_var[1]
                        GridLayout:
                            size_hint_y: 0.5
                            padding: (5,5,5,5)
                            spacing: [2,0]
                            cols: 8
                            rows: 1
                            FluidButton:
                                id: btn_imaging_dplus
                                text: 'd+'
                                on_press: root.imaging_set_time(self,[0,1])
                            FluidButton:
                                id: btn_imaging_dminus
                                text: 'd-'
                                on_press: root.imaging_set_time(self,[0,-1])
                            FluidButton:
                                id: btn_imaging_hplus
                                text: 'h+'
                                on_press: root.imaging_set_time(self,[1,1])
                            FluidButton:
                                id: btn_imaging_hminus
                                text: 'h-'
                                on_press: root.imaging_set_time(self,[1,-1])
                            FluidButton:
                                id: btn_imaging_mplus
                                text: 'm+'
                                on_press: root.imaging_set_time(self,[2,1])
                            FluidButton:
                                id: btn_imaging_mminus
                                text: 'm-'
                                on_press: root.imaging_set_time(self,[2,-1])
                            FluidButton:
                                id: btn_imaging_splus
                                text: 's+'
                                on_press: root.imaging_set_time(self,[3,1])
                            FluidButton:
                                id: btn_imaging_sminus
                                text: 's-'
                                on_press: root.imaging_set_time(self,[3,-1])

                    Widget:
                        size_hint_y: 0.01
                    FluidLineHor:
                        #inserts a horizontal line
                    BoxLayout:
                        size_hint_y: 0.15
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint_y: 0.5
                            orientation: 'horizontal'
                            Label:
                                size_hint_x: 0.2
                                text: "Images\nleft"
                            Label:
                                size_hint_x: 0.2
                                id: status_images_left
                                text: root.meas_var[2]
                                font_size: '20sp'
                            Label:
                                size_hint_x: 0.2
                                text: "Time\nleft"
                            Label:
                                size_hint_x: 0.4
                                id: status_time_left
                                text: root.meas_var[3]
                                font_size: '20sp'
                        BoxLayout:
                            size_hint_y: 0.5
                            orientation: 'horizontal'
                            Label:
                                size_hint_x: 0.2
                                text: "Images\ntaken"
                            Label:
                                size_hint_x: 0.2
                                id: status_images_taken
                                text: root.meas_var[4]
                                font_size: '20sp'
                            Label:
                                size_hint_x: 0.2
                                text: "Time\npassed"
                            Label:
                                size_hint_x: 0.4
                                id: status_time_passed
                                text: root.meas_var[5]
                                font_size: '20sp'
                    Widget:
                        size_hint_y: 0.01
                    FluidLineHor:
                        #inserts a horizontal line
                    BoxLayout:
                        size_hint_y: 0.15
                        padding: [30,2,30,2]
                        FluidButton:
                            id: btn_take_image
                            text:'Start Measurement'
                            disabled: True
                            on_release: root.measurement_control(self)
                    GridLayout:
                        size_hint_y: 0.15
                        rows: 1
                        cols: 4
                        spacing: [2,0]
                        FluidButton:
                            id: btn_snap
                            text: "SNAP"
                            disabled: True
                            on_press: root.measurement_control(self)
                        FluidButton:
                            id: btn_lastim
                            text: "LASTIM"
                            on_press: root.show_last_im(self)
                        #FluidButton:
                        #    id: btn_copy
                        #    text: "COPY"
                        #    on_press: root.scr_switch(self)
                        FluidButton:
                            id: btn_copy
                            text: "VID"
                            on_press: root.measurement_control(self)
                        BoxLayout:
                            spacing: [2,0]
                            FluidButton:
                                id: btn_take_background
                                text: "BG"
                                on_press: root.snapshot(self)
                                disabled: True
                            FluidButton:
                                id: btn_take_foreground
                                text: "FG"
                                on_press: root.snapshot(self)
                                disabled: True
                    BoxLayout:
                        size_hint_y: 0.1
                        Label: 
                            id: user_notify_expt
                            font_size: '18sp'


            # scr_options_check
            Screen:
                name: "scr_opt_check"
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'vertical'
                    padding: (30,30,30,30)
                    FluidButton:
                        id: btn_menu_opt_enable
                        text: "I am a professional.\nI know what I am doing!"
                        on_press: root.unlock_options(self)
                    FluidButton:
                        id:btn_menu_opt_checked
                        text: "You shall pass."
                        disabled: True
                        on_press: root.scr_switch(self)
                    FluidButton:
                        id: btn_menu_opt_back_to_main
                        text: "Back to Main Menu"
                        on_press: root.scr_switch(self)

            # scr_options
            Screen:
                name: "scr_opt"
                orientation: 'vertical'
                Widget:
                    size_hint_y: 0.1
                    Label:
                        text: 'Options'
                GridLayout:
                    # padding: (30,30,30,30)
                    size_hint_y: 0.6
                    cols: 3
                    rows: 3
                    spacing: [2,2]
                    FluidButtonMenu:
                        id: btn_light_set_1
                        text: "Light\nSettings 1"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_light_set_2
                        text: "Light\nSettings 2"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_cam_set_1
                        text: "Camera\nSettings 1"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_cam_set_2
                        text: "Camera\nSettings 2"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_imaging_set
                        text: "Imaging\nsettings"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_motor_set
                        text: "Motor\nSettings"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_autofocus_set
                        text: "Autofocus\nSettings"
                        on_release: root.scr_switch(self)
                    FluidButtonMenu:
                        id: btn_new_expt
                        text: "New\nExperiment"
                        on_release: root.scr_switch(self)
                Widget:
                    size_hint_y: 0.3

            # scr_help
            Screen:
                name: "scr_help"
                orientation: 'vertical'
                Widget:
                    Label:
                        text: '©2017 rebe-DEV'

            # scr_light_set_1
            Screen:
                name: "scr_light_set_1"
                pos_hint_y: 'top'
                BoxLayout:
                    orientation: 'vertical'
                    ColorPicker:
                        size_hint_y: 0.8
                        on_color: root.colorpicker_selected_color(self)
                    BoxLayout:
                        size_hint_y: 0.2
                        padding: [30,5,30,5]
                        FluidButton:
                            size_hint_x: 0.5
                            id: scr_light_set_1_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.5
                            id: scr_cam_light_1_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()

            # scr_light_set_2
            Screen:
                name: "scr_light_set_2"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.02
                    GridLayout:
                        size_hint_y: 0.08
                        padding: [3,3]
                        spacing: [3,3]
                        rows: 1
                        FluidButton:
                            text: 'CLEAR'
                            name: 'btn_light_set_2_clear'
                            id: btn_light_set_2_clear
                            on_press: root.matrix_switch(self)
                        FluidButton:
                            text: 'FILL'
                            name: 'btn_light_set_2_fill'
                            id: btn_light_set_2_fill
                            on_press: root.matrix_switch(self)
                        FluidSlide3:
                            id: slider_light_set_2_NA
                            valign: 'middle'
                            name: 'slider_light_set_2_NA'
                            min: 1
                            max: 4
                            value: 4
                            step: 1
                            on_value: root.slider_setNA(self)
                    BoxLayout:
                        size_hint_y: 0.02
                    GridLayout:
                        size_hint_y: 0.08
                        padding: [3,3]
                        spacing: [3,3]
                        cols: 6
                        FluidButton:
                            text: 'RUN'
                            id: btn_light_set_2_pattern_run
                            disabled: True
                            on_press: root.light_set_patterns(self)
                        FluidButton:
                            text: 'P1'
                            id: btn_light_set_2_pattern_1
                            value: root.init_var[2]
                            disabled: True
                            on_press: root.light_set_patterns(self)
                        FluidButton:
                            text: 'P2'
                            id: btn_light_set_2_pattern_2
                            value: root.init_var[3]
                            disabled: True
                            on_press: root.light_set_patterns(self)
                        FluidButton:
                            text: 'P3'
                            id: btn_light_set_2_pattern_3
                            value: root.init_var[4]
                            disabled: True
                            on_press: root.light_set_patterns(self)
                        FluidButton:
                            text: 'P4'
                            id: btn_light_set_2_pattern_4
                            value: root.init_var[5]
                            disabled: True
                            on_press: root.light_set_patterns(self)
                        FluidButton:
                            text: 'OFF'
                            id: btn_light_set_2_pattern_off
                            disabled: True
                            on_press: root.light_set_patterns(self)
                    GridLayout:
                        size_hint_y: 0.6
                        cols: 8
                        spacing: [1,1]
                        id: scr_light_set_2_grid
                        FluidButton:
                            value: 1
                            fl_value: [0,0,0]
                            name: "scr_light_set_2_grid_0"
                            id: scr_light_set_2_grid_0
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_1"
                            id: scr_light_set_2_grid_1
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_2"
                            id: scr_light_set_2_grid_2
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_3"
                            id: scr_light_set_2_grid_3
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_4"
                            id: scr_light_set_2_grid_4
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_5"
                            id: scr_light_set_2_grid_5
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_6"
                            id: scr_light_set_2_grid_6
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_7"
                            id: scr_light_set_2_grid_7
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_8"
                            id: scr_light_set_2_grid_8
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_9"
                            id: scr_light_set_2_grid_9
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_10"
                            id: scr_light_set_2_grid_10
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_11"
                            id: scr_light_set_2_grid_11
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_12"
                            id: scr_light_set_2_grid_12
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_13"
                            id: scr_light_set_2_grid_13
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_14"
                            id: scr_light_set_2_grid_14
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_15"
                            id: scr_light_set_2_grid_15
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_16"
                            id: scr_light_set_2_grid_16
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_17"
                            id: scr_light_set_2_grid_17
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_18"
                            id: scr_light_set_2_grid_18
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_19"
                            id: scr_light_set_2_grid_19
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_20"
                            id: scr_light_set_2_grid_20
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_21"
                            id: scr_light_set_2_grid_21
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_22"
                            id: scr_light_set_2_grid_22
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_23"
                            id: scr_light_set_2_grid_23
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_24"
                            id: scr_light_set_2_grid_24
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_25"
                            id: scr_light_set_2_grid_25
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_26"
                            id: scr_light_set_2_grid_26
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_27"
                            id: scr_light_set_2_grid_27
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_28"
                            id: scr_light_set_2_grid_28
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_29"
                            id: scr_light_set_2_grid_29
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_30"
                            id: scr_light_set_2_grid_30
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_31"
                            id: scr_light_set_2_grid_31
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_32"
                            id: scr_light_set_2_grid_32
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_33"
                            id: scr_light_set_2_grid_33
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_34"
                            id: scr_light_set_2_grid_34
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_35"
                            id: scr_light_set_2_grid_35
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_36"
                            id: scr_light_set_2_grid_36
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_37"
                            id: scr_light_set_2_grid_37
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_38"
                            id: scr_light_set_2_grid_38
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_39"
                            id: scr_light_set_2_grid_39
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_40"
                            id: scr_light_set_2_grid_40
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_41"
                            id: scr_light_set_2_grid_41
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_42"
                            id: scr_light_set_2_grid_42
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_43"
                            id: scr_light_set_2_grid_43
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_44"
                            id: scr_light_set_2_grid_44
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_45"
                            id: scr_light_set_2_grid_45
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_46"
                            id: scr_light_set_2_grid_46
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_47"
                            id: scr_light_set_2_grid_47
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_48"
                            id: scr_light_set_2_grid_48
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_49"
                            id: scr_light_set_2_grid_49
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_50"
                            id: scr_light_set_2_grid_50
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_51"
                            id: scr_light_set_2_grid_51
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_52"
                            id: scr_light_set_2_grid_52
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_53"
                            id: scr_light_set_2_grid_53
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_54"
                            id: scr_light_set_2_grid_54
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_55"
                            id: scr_light_set_2_grid_55
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_56"
                            id: scr_light_set_2_grid_56
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_57"
                            id: scr_light_set_2_grid_57
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_58"
                            id: scr_light_set_2_grid_58
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            id: scr_light_set_2_grid_59
                            name: "scr_light_set_2_grid_59"
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            id: scr_light_set_2_grid_60
                            name: "scr_light_set_2_grid_60"
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_61"
                            id: scr_light_set_2_grid_61
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_62"
                            id: scr_light_set_2_grid_62
                            on_press: root.light_settings_activate(self)
                        FluidButton:
                            value: 0
                            name: "scr_light_set_2_grid_63"
                            id: scr_light_set_2_grid_63
                            on_press: root.light_settings_activate(self)

                    # Buttons for save, restore
                    BoxLayout:
                        size_hint_y: 0.2
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_light_set_2_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_light_set_2_btn_restore
                            text: "Restore\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_light_set_2_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()
            Screen:
                name: "scr_tomo"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.033
                        padding: (2,0,2,0)
                        FluidLineHor:  
                    BoxLayout:
                        size_hint_y: 0.1
                        Label:
                            text: 'Tomography'
                    BoxLayout:
                        size_hint_y: 0.033
                        padding: (2,0,2,0)
                        FluidLineHor:                   
                        # inserts a pre-defined line                  
                    BoxLayout:
                        id: tomography_group_set
                        size_hint_y: 0.4
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint_y: 0.25
                            orientation: 'horizontal'
                            Label:
                                size_hint_x: 0.1
                                text: 'MOT\nOR'
                            FluidToggleGroup:
                                id: tomo_toggleGroup_motor
                                size_hint_x: 0.9
                                cols: 3
                                rows: 1
                                padding: (2,0,2,0)
                                current_active: 2
                                ToggleButton:
                                    id: tomo_btn_mot_sel_0
                                    text: 'X'
                                    group: "tomo_motor_dir"
                                    allow_no_selection: False
                                    #on_press: root.current_active = 0 
                                    on_release: root.tomography_btn_logic(self)
                                ToggleButton:
                                    id: tomo_btn_mot_sel_1
                                    text: 'Y'
                                    group: "tomo_motor_dir"
                                    allow_no_selection: False
                                    #on_press: root.current_active = 1
                                    on_release: root.tomography_btn_logic(self)
                                ToggleButton:
                                    id: tomo_btn_mot_sel_2
                                    text: 'Z'
                                    group: "tomo_motor_dir"
                                    allow_no_selection: False
                                    #on_press: root.current_active = 2
                                    on_release: root.tomography_btn_logic(self)
                                    state: 'down'
                        BoxLayout:
                            size_hint_y: 0.25
                            orientation: 'horizontal'
                            Label:
                                size_hint_x: 0.1
                                text: 'POS\nIM'
                            GridLayout:
                                orientation: 'horizontal'
                                cols: 3
                                size_hint_x: 0.4
                                padding: 2,2,2,0
                                FluidButton: 
                                    id: tomography_btn_set_pos_start
                                    text: 'Set\nStart'
                                    on_press: root.tomography_btn_logic(self)
                                FluidButton: 
                                    id: tomography_btn_set_pos_end
                                    text: 'Set\nEnd'
                                    on_press: root.tomography_btn_logic(self)
                            FluidToggleGroup:
                                id: tomo_toggleGroup_stepTime
                                size_hint_x: 0.5
                                cols: 2
                                rows: 1
                                padding: (2,0,2,0)
                                current_active: 0
                                ToggleButton:
                                    id: tomo_btn_steps
                                    text: '#Steps'
                                    group: "tomo_steps_config"
                                    allow_no_selection: False
                                    on_press: current_active = 0
                                    state: 'down'
                                    on_release: root.tomography_btn_logic(self)
                                ToggleButton:
                                    id: tomo_btn_time
                                    text: 'Time/Step'
                                    group: "tomo_steps_config"
                                    allow_no_selection: False
                                    on_press: current_active = 1
                                    on_release: root.tomography_btn_logic(self)

                        BoxLayout:
                            size_hint_y: 0.25
                            orientation: 'horizontal'
                            GridLayout:
                                cols: 4
                                rows: 1
                                padding: 2,0,2,0
                                Button:
                                    id: tomo_btn_set_0
                                    text: '++'
                                    value: 10
                                    on_press: root.tomography_btn_logic(self)
                                Button:
                                    id: tomo_btn_set_1
                                    text: '+'
                                    value: 1
                                    on_press: root.tomography_btn_logic(self)
                                Button:
                                    id: tomo_btn_set_2
                                    text: '-'
                                    value: -1
                                    on_press: root.tomography_btn_logic(self)
                                Button:
                                    id: tomo_btn_set_3
                                    text: '--'
                                    value: -10
                                    on_press: root.tomography_btn_logic(self)         
                    BoxLayout:
                        # labels for selection display
                        size_hint_y: 0.25
                        orientation: 'horizontal'
                        GridLayout:
                            cols: 6
                            #1.1
                            Label: 
                                size_hint_x: 0.2
                                text: 'Motor'
                            Label: 
                                id: tomography_lbl_motor
                                size_hint_x: 0.1
                                text: '2'
                            #1.2
                            Label: 
                                size_hint_x: 0.2
                                text: 'startPOS'
                            Label: 
                                id: tomography_lbl_posSTART
                                size_hint_x: 0.1
                                text: ''
                            #1.3
                            Label: 
                                size_hint_x: 0.2
                                text: 'endPOS'
                            Label: 
                                id: tomography_lbl_posEND
                                size_hint_x: 0.1
                                text: ''
                            #2.1
                            Label: 
                                size_hint_x: 0.2
                                text: 'Steps'
                            Label: 
                                id: tomography_lbl_steps
                                size_hint_x: 0.1
                                text: ''   
                            #2.2
                            Label: 
                                size_hint_x: 0.2
                                text: 'stepSize'
                            Label: 
                                id: tomography_lbl_stepsize
                                size_hint_x: 0.1
                                text: ''
                            #2.3
                            Label: 
                                size_hint_x: 0.2
                                text: 'stepTime\n[s]'
                            Label: 
                                id: tomography_lbl_steptime
                                size_hint_x: 0.1
                                text: ''
            # scr_cam_set_1
            Screen:
                name: "scr_cam_set_1"
                BoxLayout:
                    orientation: 'vertical'
                    GridLayout:
                        size_hint_y: 0.9
                        id: scr_cam_set_1_grid
                        cols: 4
                        Label:
                            text: 'awb\nMode'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_awb_mode
                            text: ''
                        Label:
                            text: 'awb\nGain'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_awb_gains
                            text: ''
                        Label:
                            text: 'exposure\nCompen\nsation'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_exposure_compensation
                            text:''
                        Label:
                            text: 'exposure\nMode'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_exposure_mode
                            text:''
                        Label:
                            text: 'iso'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_iso
                            text:''
                        Label:
                            text: 'meter\nMode'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_meter_mode
                            text:''
                        Label:
                            text: 'resolution'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_resolution
                            text:''
                        Label:
                            text: 'sensor\nmode(sm)'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_sensor_mode
                            text:''
                        Label:
                            text: 'shutter\nSpeed'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_shutter_peed
                            text:''
                        Label:
                            text: 'Use\nVideoport'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_use_video_port
                            text:''
                        Label:
                            text: 'video\nDenoise'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_video_denoise
                            text:''
                        Label:
                            text: 'video Sta\nbilization'
                        TextInput:
                            id: scr_cam_set_1_grid_lbl_value_video_stabilization
                            text:''

                    # Buttons for save, restore
                    BoxLayout:
                        size_hint_y: 0.1
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_cam_set_1_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_cam_set_1_btn_restore
                            text: "Restore\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_cam_set_1_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()

            # scr_cam_set_2
            Screen:
                name: "scr_cam_set_2"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.1
                        Label:
                            text: '~~~ Preview Mode Options~~~'
                    GridLayout:
                        size_hint_y: 0.6
                        id: scr_cam_set_2_grid
                        cols: 4
                        rows: 8
                        Label:
                            text: 'alpha'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_alpha
                            text: ''
                        Label:
                            text: 'full\nscreen'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_fullscreen
                            text: ''
                        Label:
                            text: 'extension'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_extension
                            text: ''
                        Label:
                            text: 'speed'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_speed
                            text: ''
                        Label:
                            text: 'window\nsize'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_window
                            text: ''
                        Label:
                            text: 'window\nsmall'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_window_small
                            text: ''
                        Label:
                            text: 'window\nbig'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_window_big
                            text: ''
                        Label:
                            text: 'window\nbigactive'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_window_big_active
                            text: ''

                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: 0.1
                        Label:
                            text: 'Window_size Explanation: [PosX,PosY,SizeX,SizeY]'
                    BoxLayout:
                        size_hint_y: 0.2
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_cam_set_2_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_cam_set_2_btn_restore
                            text: "Restore\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_cam_set_2_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()


            # scr_imaging_settings
            Screen:
                name: "scr_imaging_set"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.3
                    GridLayout:
                        size_hint_y: 0.2
                        id: scr_imaging_set_grid
                        cols: 4
                        Label:
                            text: 'imaging\nspeed'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_speed
                            text: ''
                        Label:
                            text: 'imaging\nwait'
                        TextInput:
                            id: scr_imaging_set_grid_lbl_value_wait
                            text: ''
                    # Buttons for save, restore
                    BoxLayout:
                        size_hint_y: 0.3
                    BoxLayout:
                        size_hint_y: 0.2
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_imaging_set_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_imaging_set_btn_restore
                            text: "Restore\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_imaging_set_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()


            # scr_motor_settings
            Screen:
                name: "scr_motor_set"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.05
                    BoxLayout:
                        size_hint_y: 0.15
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.25
                            id: scr_motor_set_cal
                            text: "Cal."
                            on_press: root.motor_calibrate_activate(self)
                        FluidButton:
                            size_hint_x: 0.25
                            id: scr_motor_set_cal_min
                            text: "Set\rmin."
                            disabled: True
                            on_press: root.motor_calibrate(self)
                        FluidButton:
                            size_hint_x: 0.25
                            id: scr_motor_set_cal_zero
                            text: "Set\n0 pos"
                            disabled: True
                            on_press: root.motor_calibrate(self)
                        FluidButton:
                            size_hint_x: 0.25
                            id: scr_motor_set_cal_max
                            text: "Set\rmax"
                            disabled: True
                            on_press: root.motor_calibrate(self)
                    GridLayout:
                        size_hint_y: 0.6
                        id: scr_motor_set_grid
                        cols: 6
                        spacing: 15
                        Label:
                            text: 'stepsize_x'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_stepsize_x
                            text: ''
                        Label:
                            text: 'stepsize_y'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_stepsize_y
                            text: ''
                        Label:
                            text: 'stepsize_z'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_stepsize_z
                            text: ''
                        Label:
                            text: 'change-\namount\n(stepsize)'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_change_amount
                            text: ''
                        Label:
                            text: 'conv.\nFactor x'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_conversion_factor_x
                            text: ''
                        Label:
                            text: 'conv.\nFactor y'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_conversion_factor_y
                            text: ''
                        Label:
                            text: 'conv.\nFactor z'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_conversion_factor_z
                            text: ''
                        Label:
                            text: 'active\nmotor'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_active_motor
                            text: ''
                        Label:
                            text: 'st.dist\nx'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_dist_x
                            text: ''
                        Label:
                            text: 'st.dist\ny'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_dist_y
                            text: ''
                        Label:
                            text: 'st.dist\nz'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_dist_z
                            text: ''
                        Label:
                            text: 'st.time\nx'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_time_x
                            text: ''
                        Label:
                            text: 'st.time\ny'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_time_y
                            text: ''
                        Label:
                            text: 'st.time\nz'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_standard_move_time_z
                            text: ''
                        Label:
                            text: 'Cal. x\n pos'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_calibration_x_pos
                            text: ''
                        Label:
                            text: 'Cal. y\n pos'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_calibration_y_pos
                            text: ''
                        Label:
                            text: 'Cal. z\n pos'
                        TextInput:
                            id: scr_motor_set_grid_lbl_value_calibration_z_pos
                            text: ''
                        
                    # Buttons for save, restore
                    BoxLayout:
                        size_hint_y: 0.2
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_motor_set_btn_save
                            text: "Save\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_motor_set_btn_restore
                            text: "Restore\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_imaging_set_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()

            # scr_copy_1
            Screen:
                name: "scr_copy_1"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.2
                        #ListView:
                        #    id: scr_copy_1_drives_list
                        #    adapter: lisa.ListAdapter(data=root.get_drives(), selection_mode='single', allow_empty_selection=False, cls=lisv.ListItemButton)
                    BoxLayout:
                        size_hint_y: 0.5
                        #FileChooserListView:
                        #   dirselect: True
                        #    id: scr_copy_1_filechooser
                        #    on_selection: root.ids.show_selected_path.text = str(self.selection)
                    # BoxLayout:
                        # padding: [10,5,10,5]
                    BoxLayout:
                        size_hint_y: 0.2
                        orientation: 'vertical'
                        Label:
                            size_hint_y: 0.3
                            id: show_selected_path
                            text: ''
                        FluidButton:
                            id: btn_copy_refresh
                            size_hint_y: 0.3
                            text: 'Refresh'
                            on_release: root.drive_selection_update()
                        FluidButton:
                            id: btn_copy_1
                            size_hint_y: 0.3
                            text: 'Ok!'
                            on_release: root.scr_switch(self)

            # scr_copy_2
            Screen:
                name: "scr_copy_2"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.1
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: 0.2
                        padding: [20,5,20,5]
                        BoxLayout:
                            size_hint_x: 0.5
                            CheckBox:
                                size_hint_x: 0.3
                                id: scr_copy_2_check
                                active: False
                            Label:
                                size_hint_x: 0.7
                                text: " < Overwrite?"
                        BoxLayout:
                            size_hint_x: 0.5
                            FluidButton:
                                id: scr_copy_2_start
                                text: '!Copy Data!'
                                on_release: root.copy_data(self)
                    BoxLayout:
                        size_hint_y: 0.1
                        ProgressBar:
                            id: scr_copy_2_progressbar
                            max: 1000
                            value: 30
                    BoxLayout:
                        size_hint_y: 0.4
                        # will hold the copy status
                        Label:
                            id: scr_copy_2_status_lbl
                            text: ''
                    BoxLayout
                        orientation: 'horizontal'
                        size_hint_y: 0.1
                        BoxLayout:
                            size_hint_x: 0.5
                            CheckBox:
                                size_hint_x: 0.3
                                id: scr_copy_2_delete_check
                                active: False
                                on_active: root.chkbox_delete_active()
                            Label:
                                size_hint_x: 0.7
                                text: " < Sure?"
                        BoxLayout:
                            size_hint_x: 0.5
                            FluidButton:
                                id: scr_copy_2_delete_btn
                                text: "DELETE"
                                on_release: root.delete_data(self)
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: 0.2
                        FluidButton:
                            size_hint_x: 0.5
                            id: scr_copy_2_back_copy
                            text: 'Back to\nPrevious'
                            on_release: root.scr_switch(self)
                        FluidButton:
                            size_hint_x: 0.5
                            id: scr_copy_2_back_main
                            text: 'Back to\nMain'
                            on_release: root.scr_switch(self)

            # Screen Autofocus settings
            Screen:
                name: "scr_autofocus_set"
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        size_hint_y: 0.01
                    GridLayout:
                        size_hint_y: 0.89
                        id: scr_autofocus_set_grid
                        cols: 4
                        spacing: 2
                        Label:
                            text: 'backlash'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_backlash
                            text: ''
                        Label:
                            text: 'use glob.\nCam-Sett.'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_camProp_use_global
                            text: ''
                        Label:
                            text: 'max.dur.'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_duration_max
                            text: ''
                        Label:
                            text: 'interval[min]'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_interval_min
                            text: ''
                        Label:
                            text: 'maxmin'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_maxmin
                            text: ''
                        Label:
                            text: 'max_steps'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_max_steps
                            text: ''
                        Label:
                            text: 'motor'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_motor
                            text: ''
                        Label:
                            text: 'run only\nonce'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_run_only_once
                            text: ''
                        Label:
                            text: 'save im'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_save_images
                            text: ''
                        Label:
                            text: 'save\nsharpness'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_save_sharpness
                            text: ''
                        Label:
                            text: 'scan\niterations'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_scan_iterations
                            text: ''
                        Label:
                            text: 'scan method'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_scan_method
                            text: ''
                        Label:
                            text: 'sensor\nmode'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_sensor_mode
                            text: ''
                        Label:
                            text: 'Coarse\nstep-size'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_step_dist_coarse
                            text: ''
                        Label:
                            text: 'Fine\nstep-size'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_step_dist_fine
                            text: ''
                        Label:
                            text: 'Coarse steps'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_steps_coarse
                            text: ''
                        Label:
                            text: 'fine steps'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_steps_fine
                            text: ''
                        Label:
                            text: 'Sharpness\nMeasure'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_technique
                            text: ''
                        Label:
                            text: 'use\nchannel'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_use_channel
                            text: ''
                        Label:
                            text: 'use coarse\nonly'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_use_coarse_only
                            text: ''
                        Label:
                            text: 'use last\nautofocus'
                        TextInput:
                            id: scr_autofocus_set_lbl_value_use_last_autofocus
                            text: ''
                    # Buttons for save, restore
                    BoxLayout:
                        size_hint_y: 0.1
                        padding: [20,5,20,5]
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_autofocus_set_btn_save
                            text: "Save AF\nSettings"
                            on_press: root.options_settings_save(self)
                        FluidButton:
                            size_hint_x: 0.34
                            id: scr_autofocus_set_btn_restore
                            text: "Restore AF\nSettings"
                            on_press: root.options_settings_restore(self)
                        FluidButton:
                            size_hint_x: 0.33
                            id: scr_autofocus_set_btn_back
                            text: "Back"
                            on_press: root.options_settings_back()
    # BREAK LINE
    BoxLayout:
        size_hint_x: 0.005
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                pos: self.pos
                size: self.size

    # MENU
    BoxLayout:
        size_hint_x: 0.045
        orientation: 'vertical'

        FluidButtonMenu:
            size_hint_y: 0.1
            id: btn_menu_exit_program
            text: "X"
            on_release: root.btn_end_program()
            #on_touch_down: root.create_clock(self,*args)
            #on_touch_up: root.delete_clock(self,*args)
        Widget:
            size_hint_y: 0.1
        FluidButtonMenu:
            size_hint_y: 0.08
            id: btn_menu_opt
            text: "OPT"
            on_release: root.scr_switch(self)
        FluidButtonMenu:
            size_hint_y: 0.08
            id: btn_menu_help
            text: "HELP"
            on_release: root.scr_switch(self)
        FluidButtonMenu:
            size_hint_y: 0.08
            id: btn_menu_main
            text: "MAIN"
            on_release: root.scr_switch(self)
        Widget:
            size_hint_y: 0.1
        FluidButtonMenu:
            size_hint_y: 0.16
            id: btn_scr_name
            text: "STA\nRT"
            disabled: True